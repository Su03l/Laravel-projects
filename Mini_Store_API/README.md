# واجهة برمجة تطبيقات متجر صغير

واجهة برمجة تطبيقات RESTful لنظام تجارة إلكترونية بسيط يدير المنتجات والطلبات، مبنية باستخدام Laravel. تتميز بعلاقات متقدمة متعدد-إلى-متعدد وإدارة تلقائية للمخزون.

## المميزات

-   **إدارة المنتجات:** عمليات CRUD كاملة لمنتجات المتجر مع تتبع المخزون.
-   **معالجة الطلبات:** إنشاء طلبات مع منتجات متعددة وكميات محددة.
-   **إدارة المخزون:**
    -   **خصم تلقائي للمخزون** عند تقديم الطلب.
    -   **استعادة تلقائية للمخزون** عند حذف الطلب.
    -   منع الطلبات في حالة عدم كفاية المخزون.
-   **منطق تلقائي:** توليد تلقائي لأرقام طلبات فريدة.
-   **التحقق من الصحة:** تحقق صارم من المدخلات وتوفر المخزون.
-   **معاملات قاعدة البيانات:** ضمان سلامة البيانات أثناء إنشاء وإلغاء الطلبات.

## التقنيات المستخدمة

-   **Laravel:** إطار عمل PHP المستخدم لبناء الواجهة.
-   **SQLite:** قاعدة البيانات المستخدمة للتطوير.
-   **PHP:** لغة البرمجة من جانب الخادم.

## نقاط النهاية (API Endpoints)

### المنتجات

#### 1. عرض جميع المنتجات

-   **URL:** `/api/products`
-   **Method:** `GET`
-   **الوصف:** يسترجع قائمة بجميع المنتجات في المتجر.

#### 2. إنشاء منتج

-   **URL:** `/api/products`
-   **Method:** `POST`
-   **Body:**
    ```json
    {
        "name": "Gaming Laptop",
        "price": 4500.5,
        "stock": 10
    }
    ```
-   **الوصف:** إضافة منتج جديد إلى المخزون.

#### 3. عرض منتج واحد

-   **URL:** `/api/products/{id}`
-   **Method:** `GET`
-   **الوصف:** يسترجع تفاصيل منتج معين.

#### 4. تحديث منتج

-   **URL:** `/api/products/{id}`
-   **Method:** `PUT` or `PATCH`
-   **Body:**
    ```json
    {
        "price": 4200.0,
        "stock": 15
    }
    ```
-   **الوصف:** تحديث تفاصيل المنتج (مثل إعادة التخزين أو تغيير السعر).

#### 5. حذف منتج

-   **URL:** `/api/products/{id}`
-   **Method:** `DELETE`
-   **الوصف:** إزالة منتج من النظام.

---

### الطلبات

#### 1. عرض جميع الطلبات

-   **URL:** `/api/orders`
-   **Method:** `GET`
-   **الوصف:** يسترجع قائمة بجميع الطلبات مع المنتجات والكميات المرتبطة بها.

#### 2. إنشاء طلب (الدفع)

-   **URL:** `/api/orders`
-   **Method:** `POST`
-   **Body:**
    ```json
    {
        "customer_name": "Suliman Yousef",
        "products": [
            {
                "product_id": 1,
                "quantity": 2
            },
            {
                "product_id": 2,
                "quantity": 1
            }
        ]
    }
    ```
-   **الوصف:** إنشاء طلب جديد. يتحقق تلقائياً من توفر المخزون، ويخصم الكمية من المنتجات، ويولد رقم طلب فريد.

#### 3. عرض طلب واحد

-   **URL:** `/api/orders/{id}`
-   **Method:** `GET`
-   **الوصف:** يسترجع تفاصيل طلب معين بما في ذلك المنتجات المطلوبة.

#### 4. تحديث طلب

-   **URL:** `/api/orders/{id}`
-   **Method:** `PUT` or `PATCH`
-   **الوصف:** تحديث تفاصيل الطلب أو مزامنة قائمة المنتجات.

#### 5. حذف طلب (إلغاء)

-   **URL:** `/api/orders/{id}`
-   **Method:** `DELETE`
-   **الوصف:** إلغاء الطلب واستعادة الكميات المطلوبة تلقائياً إلى مخزون المنتجات.

---

## التثبيت

1. **استنساخ المستودع:**

    ```bash
    git clone <repository-url>
    ```

2. **تثبيت الحزم:**

    ```bash
    composer install
    ```

3. **تكوين البيئة:**
   نسخ `.env.example` إلى `.env` وتكوين إعدادات قاعدة البيانات:

    ```bash
    cp .env.example .env
    ```

4. **توليد مفتاح التطبيق:**

    ```bash
    php artisan key:generate
    ```

5. **تشغيل الهجرات والبذور:**
   (اختياري: استخدم `--seed` لملء بيانات تجريبية)

    ```bash
    php artisan migrate --seed
    ```

6. **تشغيل التطبيق:**
    ```bash
    php artisan serve
    ```

---

## الترخيص

هذا المشروع مرخص تحت ترخيص MIT.
