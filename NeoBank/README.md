# ูุธุงู ุงููุญูุธุฉ ุงูุจูููุฉ ุงูุฐูู (NeoBank Core API) ๐ฆ๐ณ

ูุธุงู ูุงูู ูุชูุงูู (Fintech Backend) ูุจูู ุจุงุณุชุฎุฏุงู **Laravel**. ูุญุงูู ุงูุฃูุธูุฉ ุงูุจูููุฉ ุงูุญููููุฉ ูู ุญูุซ ุชูููุฏ ุฃุฑูุงู ุงูุญุณุงุจุงุช ุงูุฏูููุฉ (IBAN)ุ ุฅุฏุงุฑุฉ ุงูุนูููุงุช ุงููุงููุฉ ุงูุขููุฉ (ACID Transactions)ุ ูููุน ุชุถุงุฑุจ ุงูุจูุงูุงุช (Race Conditions).

ูุชููุฒ ุงููุธุงู ุจู **"ูุญุฑู ุชุญููู ุฐูู"** ูุณูุญ ุจุฅุฌุฑุงุก ุงููุฏููุนุงุช ุนุจุฑ ุงูุจุฑูุฏุ ุงููุงุชูุ ุฑูู ุงูุญุณุงุจุ ุฃู ุงูุขูุจุงู.

## ๐ ุฃุจุฑุฒ ุงููููุฒุงุช ุงูุชูููุฉ (Key Features)

### 1. ุงููููุฉ ุงูุจูููุฉ ุงูุชููุงุฆูุฉ (Auto-Banking Identity) ๐

ุจูุฌุฑุฏ ุชุณุฌูู ุงูุนูููุ ูููู ุงููุธุงู ุชููุงุฆูุงู ุนุจุฑ `Model Events` ุจู:

-   ุฅูุดุงุก ูุญูุธุฉ ูุงููุฉ ุฎุงุตุฉ.
-   ุชูููุฏ **ุฑูู ุญุณุงุจ ูุฑูุฏ** (10 ุฃุฑูุงู).
-   ุชูููุฏ **ุฑูู ุขูุจุงู ุฏููู (SA IBAN)** ูุชูุงูู ูุน ุงููุนุงููุฑ ุงูุณุนูุฏูุฉ.

### 2. ูุญุฑู ุงูุชุญููู ุงูุฐูู (Smart Transfer Engine) ๐ง

ูุง ูุญุชุงุฌ ุงููุฑุณู ููุนุฑูุฉ ููุน ุจูุงูุงุช ุงููุณุชูู. ุงูู API ุฐูู ููุงูุฉ ูุงุณุชูุจุงู ุฃู ูุนุฑู:

-   โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Email)
-   โ ุฑูู ุงูุฌูุงู (Phone)
-   โ ุฑูู ุงูุญุณุงุจ (Account Number)
-   โ ุฑูู ุงูุขูุจุงู (IBAN)

ุณูููู ุงููุธุงู ุจุงูุจุญุซ ุนู ุงููุณุชูู ุชููุงุฆูุงู ูุฅุชูุงู ุงูุนูููุฉ.

### 3. ุงูุฃูุงู ุงููุงูู (Financial Integrity & Locking) ๐

-   **Database Transactions:** ุถูุงู ุชูููุฐ ุงูุนูููุฉ ุจุงููุงูู ุฃู ุฅูุบุงุฆูุง ุจุงููุงูู (All-or-Nothing).
-   **Atomic Locks (`lockForUpdate`):** ููู ุณุฌูุงุช ุงููุฑุณู ูุงููุณุชูู ูุญุธูุงู ูููุน "ุงูุฅููุงู ุงููุฒุฏูุฌ" (Double Spending) ูู ุญุงู ูุตูู ุทูุจูู ูู ููุณ ุงูููู ุซุงููุฉ.

### 4. ุชูุงุฑูุฑ ููุตูุฉ (Detailed Resources) ๐

ุงุณุชุฎุฏุงู `API Resources` ูุชูุฏูู ุจูุงูุงุช JSON ูููููุฉ:

-   **ุจุทุงูุฉ ุงูุญุณุงุจ:** ุชุนุฑุถ ุงูุงุณูุ ุงูุขูุจุงูุ ูุงููุฑุน ุงูุจููู.
-   **ูุดู ุงูุญุณุงุจ:** ุณุฌู ุฏููู ููู ุนูููุฉ ุฅูุฏุงุนุ ุณุญุจุ ุฃู ุชุญููู ูุน ุงูุฃุฑูุงู ุงููุฑุฌุนูุฉ (UUID).

---

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ (Tech Stack)

-   **Framework:** Laravel 11
-   **Language:** PHP 8.2+
-   **Database:** SQLite
-   **Authentication:** Laravel Sanctum
-   **Concepts:** ACID, Pessimistic Locking, Polymorphic Logic, Observers

---

## ๐ ููููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Schema)

-   **Users:** (id, name, email, phone, password)
-   **Wallets:**
    -   `user_id`: ูุงูู ุงููุญูุธุฉ.
    -   `balance`: ุงูุฑุตูุฏ (Decimal 16,2).
    -   `account_number`: ุฑูู ุญุณุงุจ ูุญูู ูุฑูุฏ.
    -   `iban`: ุฑูู ุฏููู ูุฑูุฏ (SA...).
-   **Transactions:** (uuid, type, amount, related_wallet_id)

---

## ๐ ุฏููู ุงูุฑูุงุจุท (API Endpoints)

### 1. ุงููุตุงุฏูุฉ ูุงูููู ุงูุดุฎุตู (Auth & Profile)

| Method | Endpoint                | ุงููุตู                                        |
| :----- | :---------------------- | :------------------------------------------- |
| `POST` | `/api/register`         | ุชุณุฌูู ุฌุฏูุฏ (ูุทูุจ ุงูุงุณูุ ุงูุฅููููุ **ุงูุฌูุงู**) |
| `POST` | `/api/login`            | ุชุณุฌูู ุงูุฏุฎูู                                 |
| `GET`  | `/api/profile`          | ุนุฑุถ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุงููุญูุธุฉ                 |
| `PUT`  | `/api/profile`          | ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ                       |
| `PUT`  | `/api/profile/password` | ุชุบููุฑ ูููุฉ ุงููุฑูุฑ                            |

### 2. ุงูุฎุฏูุงุช ุงูุจูููุฉ (Banking Services)

| Method | Endpoint               | ุงููุตู                                                    |
| :----- | :--------------------- | :------------------------------------------------------- |
| `GET`  | `/api/wallet`          | **ุจุทุงูุฉ ุงูุญุณุงุจ:** ุชุนุฑุถ ุงูุขูุจุงูุ ุงูุฑุตูุฏุ ููุนูููุงุช ุงูุจูู   |
| `GET`  | `/api/wallet/balance`  | ูุญุต ุณุฑูุน ููุฑุตูุฏ ููุท                                      |
| `GET`  | `/api/wallet/history`  | ูุดู ุญุณุงุจ ุจุงูุนูููุงุช ุงูุณุงุจูุฉ                               |
| `POST` | `/api/wallet/deposit`  | ุฅูุฏุงุน ุฑุตูุฏ (ูุญุงูุงุฉ ููุตุฑุงู ุงูุขูู)                         |
| `POST` | `/api/wallet/transfer` | **ุงูุชุญููู ุงูุฐูู:** ููุจู (email, phone, iban, account_no) |

---

## ๐งช ููุฏ ุงูุชุญููู ุงูุฐูู (Logic Snippet)

ููู ูุชุนุฑู ุงููุธุงู ุนูู ุงููุณุชููุ ุฅููู ุงูููุทู ุงููุณุชุฎุฏู ูู `WalletController`:

```php
$receiver = User::where('email', $input)
    ->orWhere('phone', $input)
    ->orWhereHas('wallet', function ($q) use ($input) {
        $q->where('account_number', $input)->orWhere('iban', $input);
    })
    ->first();
```

---

## ๐ ุทุฑููุฉ ุงูุชุซุจูุช ูุงูุชุดุบูู (Installation)

1. **ูุณุฎ ุงููุณุชูุฏุน:**

    ```bash
    git clone https://github.com/your-username/neobank-api.git
    ```

2. **ุชุซุจูุช ุงูุญุฒู:**

    ```bash
    composer install
    ```

3. **ุฅุนุฏุงุฏ ุงูุจูุฆุฉ:**

    - ูู ุจูุณุฎ ููู `.env.example` ุฅูู `.env`.
    - ูู ุจุฅุนุฏุงุฏ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

4. **ุชุฌููุฒ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**

    ```bash
    php artisan migrate
    ```

5. **ุชุดุบูู ุงูุณูุฑูุฑ:**
    ```bash
    php artisan serve
    ```
