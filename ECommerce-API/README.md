# ูุธุงู ูุชุฌุฑ ุฅููุชุฑููู ูุชูุงูู (Advanced E-Commerce API) ๐๐ฆ

ูุดุฑูุน Backend ูุชูุฏู ููุธุงู ุชุฌุงุฑุฉ ุฅููุชุฑูููุฉุ ูุฑูุฒ ุนูู **ุฏูุฉ ุงููุนุงููุงุช ุงููุงููุฉ ูุงููุฎุฒููุฉ (Data Integrity)** ู **ุฅุฏุงุฑุฉ ุงููููุงุช**.
ูุญู ูุฐุง ุงููุดุฑูุน ูุดููุฉ "ุชุถุงุฑุจ ุงูุทูุจุงุช" (Race Conditions) ููุถูู ุนุฏู ุจูุน ููุชุฌุงุช ุบูุฑ ูุชููุฑุฉ ุจุงุณุชุฎุฏุงู ุชูููุงุช ููุงุนุฏ ุงูุจูุงูุงุช ุงููุชูุฏูุฉ.

## ๐ ุฃุจุฑุฒ ุงููููุฒุงุช ุงูุชูููุฉ (Key Features)

-   **ุงูุนูููุงุช ุงูุขููุฉ (Database Transactions):** ุงุณุชุฎุฏุงู `DB::beginTransaction` ูุถูุงู ุชูููุฐ ุนูููุฉ ุงูุดุฑุงุก (ุฅูุดุงุก ุงูุทูุจ + ุฎุตู ุงููุฎุฒูู) ููุชูุฉ ูุงุญุฏุฉุ ุฃู ุงูุชุฑุงุฌุน ุนููุง ุจุงููุงูู ูู ุญุงู ุญุฏูุซ ุฎุทุฃ.
-   **ููุน ุชุถุงุฑุจ ุงูุทูุจุงุช (Concurrency Control):** ุงุณุชุฎุฏุงู `lockForUpdate()` ูููุน ูุณุชุฎุฏููู ูู ุดุฑุงุก ุขุฎุฑ ูุทุนุฉ ูู ููุณ ุงููุญุธุฉ.
-   **ุฅุฏุงุฑุฉ ุงููุฎุฒูู ุงูุฐููุฉ (Smart Stock):**
    -   ุฎุตู ุงููููุฉ ุชููุงุฆูุงู ุนูุฏ ุงูุดุฑุงุก.
    -   **ุงุณุชุฑุฌุงุน ุงููููุฉ ุชููุงุฆูุงู** ูููุฎุฒูู ุนูุฏ ุฅูุบุงุก ุงูุทูุจ (`DELETE`).
-   **ุฑูุน ุงูุตูุฑ (File Uploads):** ูุธุงู ูุชูุงูู ูุฑูุน ุตูุฑ ุงูููุชุฌุงุช ูุชุฎุฒูููุง ูู `public/storage` ูุญุฐููุง ุนูุฏ ุญุฐู ุงูููุชุฌ.
-   **ุฅุฏุงุฑุฉ ุงูุญุณุงุจ:** ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ูุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจุดูู ุขูู.

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

-   **Laravel 10/11** Framework.
-   **Laravel Sanctum** (Authentication).
-   **MySQL** (Database).
-   **Multipart/Form-Data** (For Image Uploads).
-   **PHP Traits & Eloquent Relationships.**

## ๐ก ุฏููู ุงูุฑูุงุจุท (API Endpoints)

### ๐ ุนุงูุฉ (Public) - ูุง ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู

| ุงูุทุฑููุฉ | ุงูุฑุงุจุท                 | ุงููุตู                   |
| :------ | :--------------------- | :---------------------- |
| `POST`  | `/api/register`        | ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ         |
| `POST`  | `/api/login`           | ุชุณุฌูู ุงูุฏุฎูู            |
| `GET`   | `/api/categories`      | ุนุฑุถ ุงูุฃูุณุงู             |
| `GET`   | `/api/categories/{id}` | ุนุฑุถ ุชูุงุตูู ูุณู          |
| `GET`   | `/api/products`        | ุนุฑุถ ุงูููุชุฌุงุช (ูุน ุงูุตูุฑ) |
| `GET`   | `/api/products/{id}`   | ุนุฑุถ ุชูุงุตูู ููุชุฌ         |

### ๐ ููุทูุฉ ุงููุณุชุฎุฏู (User & Orders) - ุชุชุทูุจ Token

| ุงูุทุฑููุฉ  | ุงูุฑุงุจุท                  | ุงููุตู                            |
| :------- | :---------------------- | :------------------------------- |
| `POST`   | `/api/logout`           | ุชุณุฌูู ุงูุฎุฑูุฌ                     |
| `GET`    | `/api/profile`          | ุนุฑุถ ุจูุงูุงุชู                      |
| `PUT`    | `/api/profile`          | ุชุญุฏูุซ ุงูุงุณู ูุงูุฅูููู             |
| `PUT`    | `/api/profile/password` | ุชุบููุฑ ูููุฉ ุงููุฑูุฑ                |
| `POST`   | `/api/orders`           | **ุฅุชูุงู ุงูุดุฑุงุก (Checkout)**      |
| `GET`    | `/api/orders`           | ุณุฌู ุทูุจุงุชู                       |
| `GET`    | `/api/orders/{id}`      | ุชูุงุตูู ุทูุจ ูุนูู                  |
| `DELETE` | `/api/orders/{id}`      | **ุฅูุบุงุก ุงูุทูุจ (ูุณุชุฑุฌุน ุงููุฎุฒูู)** |

### ๐ธ ููุญุฉ ุงูุชุญูู (Dashboard)

_ููุงุญุธุฉ: ูุฑูุน ุงูุตูุฑ ุงุณุชุฎุฏู Body ููุน `form-data`_

| ุงูุทุฑููุฉ  | ุงูุฑุงุจุท                 | ุงููุตู                             |
| :------- | :--------------------- | :-------------------------------- |
| `POST`   | `/api/categories`      | ุฅุถุงูุฉ ูุณู                         |
| `PUT`    | `/api/categories/{id}` | ุชุนุฏูู ูุณู                         |
| `DELETE` | `/api/categories/{id}` | ุญุฐู ูุณู                           |
| `POST`   | `/api/products`        | ุฅุถุงูุฉ ููุชุฌ + ุตูุฑุฉ                 |
| `POST`   | `/api/products/{id}`   | ุชุนุฏูู ููุชุฌ (ูุน `_method=PUT`)     |
| `DELETE` | `/api/products/{id}`   | ุญุฐู ููุชุฌ (ูุญุฐู ุงูุตูุฑุฉ ูู ุงูุณูุฑูุฑ) |

## โ๏ธ ุงูุชุซุจูุช ูุงูุชุดุบูู (Local Setup)

### 1. ูุณุฎ ุงููุดุฑูุน:

```bash
git clone <your-repo-url>
cd ECommerce-API
composer install
```

### 2. ุฅุนุฏุงุฏ ุงูุจูุฆุฉ:

```bash
cp .env.example .env
php artisan key:generate
```

_(ูู ุจุถุจุท ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ููู `.env`)_

### 3. ุฑุจุท ุงูุชุฎุฒูู (ุฎุทูุฉ ุฅุฌุจุงุฑูุฉ ููุตูุฑ):

```bash
php artisan storage:link
```

### 4. ุจูุงุก ุงูุฌุฏุงูู ูุงูุจูุงูุงุช ุงูููููุฉ:

```bash
php artisan migrate --seed
```

_ุณูููู ูุฐุง ุงูุฃูุฑ ุจุฅูุดุงุก ููุชุฌุงุช ูุฃูุณุงู ููุชุฌุฑุจุฉ ููุฑุงู._

### 5. ุชุดุบูู ุงูุณูุฑูุฑ:

```bash
php artisan serve
```

## ๐งช ุณููุงุฑูู ุงุฎุชุจุงุฑ ููุฉ ุงููุธุงู (Test Scenario)

ููุชุฃูุฏ ูู ุนูู ุงูู Transactions ุจุดูู ุตุญูุญ:

1. ุงุฎุชุฑ ููุชุฌุงู ูููุชู `5`.
2. ุญุงูู ุทูุจ ูููุฉ `10` โ ุงููุธุงู ุณูุฑูุถ ุงูุนูููุฉ ุจุงููุงูู.
3. ุงุทูุจ ูููุฉ `2` โ ุงููุธุงู ุณููุจู ููุตุจุญ ุงููุฎุฒูู `3`.
4. ูู ุจุฅูุบุงุก ุงูุทูุจ (`DELETE`) โ ุณูุนูุฏ ุงููุฎุฒูู ุชููุงุฆูุงู ุฅูู `5`.

## ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช [ุชุฑุฎูุต MIT](https://opensource.org/licenses/MIT).
