# متجر إلكتروني مصغر (Mini Store API)

## اسم الفكرة

نظام إدارة منتجات متعدد التصنيفات (Many-to-Many)

## شرح تفصيلي للفكرة

هذا هو المشروع الثالث في تحدي "30 يوم 30 مشروع". التركيز الأساسي هنا هو فهم وإتقان علاقات قواعد البيانات من نوع Many-to-Many (متعدد لمتعدد).
في المتاجر الحقيقية، المنتج الواحد (مثل "لعبة فيفا") قد يندرج تحت عدة أقسام (مثل: "ألعاب بلايستيشن"، "عروض خاصة"، "الأكثر مبيعاً") في نفس الوقت. هذا المشروع يحل هذه المعضلة باستخدام جدول وسيط (Pivot Table) يربط المنتجات بالأقسام بمرونة عالية.

## المميزات بالتفصيل الممل

### علاقات متشابكة (Many-to-Many):

-   إمكانية ربط منتج واحد بأكثر من قسم (Array of IDs).
-   إمكانية عرض القسم وجلب جميع المنتجات المندرجة تحته.

### إدارة مخزون ذكية (Custom Logic):

-   المنتجات الملموسة لها كمية محددة (stock).
-   المنتجات الرقمية (مثل قسم "أونلاين") يتم ضبط مخزونها تلقائياً ليكون مفتوحاً (Unlimited) برقم 999999.

### بيانات واقعية (Custom Seeding):

-   تم الاستغناء عن البيانات العشوائية للأقسام واستبدالها بأقسام واقعية محددة (ألعاب، أفلام سينما، مسرح، حجز تذاكر، أونلاين).
-   مولد البيانات ينشئ منتجات ويربطها بهذه الأقسام تلقائياً.

### عمليات CRUD كاملة وموحدة:

-   جميع الردود (Responses) موحدة بصيغة JSON.
-   استخدام sync عند التعديل لضمان تحديث العلاقات بدقة (حذف القديم وإضافة الجديد).
-   التحقق من صحة مصفوفة الأقسام (exists:categories,id) قبل الحفظ.

## التقنيات المستخدمة

-   الإطار البرمجي: Laravel 11 (API Mode)
-   قاعدة البيانات: SQLite.
-   نوع العلاقة: BelongsToMany + Pivot Table.
-   التوثيق: Dedoc Scramble.

## جدول الروابط (API Routes)

| الطريقة | الرابط               | الوصف                 | البيانات المطلوبة (JSON)               |
| :------ | :------------------- | :-------------------- | :------------------------------------- |
| GET     | /api/categories      | عرض الأقسام           | -                                      |
| POST    | /api/categories      | إنشاء قسم             | name                                   |
| GET     | /api/categories/{id} | عرض قسم ومنتجاته      | -                                      |
| PUT     | /api/categories/{id} | تعديل قسم             | name                                   |
| DELETE  | /api/categories/{id} | حذف قسم               | -                                      |
| GET     | /api/products        | عرض المنتجات وأقسامها | -                                      |
| POST    | /api/products        | إنشاء منتج            | name, price, stock, categories (Array) |
| GET     | /api/products/{id}   | عرض منتج وتفاصيله     | -                                      |
| PUT     | /api/products/{id}   | تعديل منتج            | name, price, stock, categories         |
| DELETE  | /api/products/{id}   | حذف منتج              | -                                      |

## طريقة التنزيل والتثبيت

1. استنساخ المشروع:

```bash
git clone <repository_link>
cd day03-store
```

2. تثبيت الحزم:

```bash
composer install
```

3. إعداد البيئة:

```bash
cp .env.example .env
# Windows
type nul > database/database.sqlite
# (تأكد من DB_CONNECTION=sqlite)
```

4. بناء الجداول وتعبئة البيانات المخصصة:

```bash
php artisan migrate:fresh --seed
```

(سيتم إنشاء الأقسام: ألعاب، سينما، أونلاين... وإضافة منتجات لها).

5. تشغيل السيرفر:

```bash
php artisan serve
```

الآن، اختبر المشروع عبر Scramble: http://127.0.0.1:8000/docs/api
