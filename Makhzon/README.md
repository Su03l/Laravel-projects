# نظام إدارة المخزون (Makhzon API)

نظام خلفي (Backend) متكامل واحترافي لإدارة المستودعات وحركات المخزون. تم بناء هذا المشروع ليكون "المحرك" لأي تطبيق ويب أو جوال يهدف لإدارة المبيعات والمخزون، حيث يوفر واجهة برمجية (RESTful API) دقيقة وسريعة للتعامل مع البيانات.

يقوم النظام بإدارة دورة حياة المنتج كاملة: من تعريف الأقسام والموردين، إلى إضافة المنتجات، ثم تسجيل عمليات التوريد والصرف، وأخيراً استخراج التقارير المالية والجردية.

## أبرز المميزات التقنية (Key Features)

### 1. نظام حماية متكامل (Authentication)

تسجيل دخول وخروج آمن باستخدام Tokens (Sanctum).

### 2. إدارة الملف الشخصي (Profile Management)

إمكانية تحديث بيانات الموظف وتغيير كلمة المرور.

### 3. إدارة المنتجات الذكية (Smart Products)

-   إضافة منتجات، بحث سريع، فلترة حسب الأقسام.
-   تنبيهات عند انخفاض الكمية.

### 4. محرك الحركات (Transactions Engine)

-   لا يتم تعديل الكميات يدوياً لضمان الأمان.
-   الكميات تزيد وتنقص تلقائياً بناءً على حركات "التوريد" (In) و "الصرف" (Out).

### 5. لوحة تحكم (Dashboard)

تعرض للمدير إجمالي قيمة المخزون، عدد المنتجات، وتنبيهات النواقص.

### 6. التقارير (Excel Export)

تصدير جرد كامل للمستودع بضغطة زر بصيغة Excel.

---

## التقنيات المستخدمة (Tech Stack)

-   **Framework:** Laravel 11
-   **Language:** PHP 8.2+
-   **Database:** SQLite
-   **Authentication:** Laravel Sanctum
-   **Excel Export:** Maatwebsite Excel
-   **Architecture:** RESTful API, API Resources

---

## دليل الروابط (API Endpoints)

### 1. المصادقة (Auth)

| Method | Endpoint             | الوصف                               |
| :----- | :------------------- | :---------------------------------- |
| `POST` | `/api/auth/register` | إنشاء حساب جديد (للاستخدام الإداري) |
| `POST` | `/api/auth/login`    | تسجيل الدخول (يرجع Token)           |
| `POST` | `/api/auth/logout`   | تسجيل الخروج (يحذف Token)           |

### 2. الملف الشخصي (Profile)

| Method | Endpoint                | الوصف                      |
| :----- | :---------------------- | :------------------------- |
| `GET`  | `/api/profile`          | عرض بيانات المستخدم الحالي |
| `PUT`  | `/api/profile`          | تحديث الاسم والبريد        |
| `PUT`  | `/api/profile/password` | تغيير كلمة المرور          |

### 3. لوحة المعلومات (Dashboard)

| Method | Endpoint         | الوصف                                       |
| :----- | :--------------- | :------------------------------------------ |
| `GET`  | `/api/dashboard` | عرض إحصائيات، إجمالي قيمة المخزون، والنواقص |

### 4. المنتجات (Products)

| Method   | Endpoint             | الوصف                                               |
| :------- | :------------------- | :-------------------------------------------------- |
| `GET`    | `/api/products`      | عرض كل المنتجات (يدعم `?search=` و `?category_id=`) |
| `POST`   | `/api/products`      | إضافة منتج جديد                                     |
| `GET`    | `/api/products/{id}` | عرض تفاصيل منتج واحد                                |
| `PUT`    | `/api/products/{id}` | تحديث بيانات المنتج (ما عدا الكمية)                 |
| `DELETE` | `/api/products/{id}` | حذف منتج                                            |

### 5. حركات المخزون (Transactions)

| Method | Endpoint            | الوصف                                   |
| :----- | :------------------ | :-------------------------------------- |
| `GET`  | `/api/transactions` | عرض سجل الحركات (التوريد والصرف)        |
| `POST` | `/api/transactions` | تسجيل حركة جديدة (يؤثر على كمية المنتج) |

### 6. الأقسام والموردين (Categories & Suppliers)

| Method | Endpoint          | الوصف         |
| :----- | :---------------- | :------------ |
| `GET`  | `/api/categories` | عرض التصنيفات |
| `POST` | `/api/categories` | إضافة تصنيف   |
| `GET`  | `/api/suppliers`  | عرض الموردين  |
| `POST` | `/api/suppliers`  | إضافة مورد    |

### 7. التقارير (Reports)

| Method | Endpoint                 | الوصف                           |
| :----- | :----------------------- | :------------------------------ |
| `GET`  | `/api/reports/inventory` | تحميل ملف Excel يحتوي على الجرد |

---

## طريقة التثبيت والتشغيل (Installation)

1. **نسخ المستودع:**

    ```bash
    git clone https://github.com/Su03l/Laravel-projects/tree/main/Makhzon
    ```

2. **تثبيت الحزم:**

    ```bash
    composer install
    ```

3. **إعداد البيئة:**

    - قم بنسخ ملف `.env.example` إلى `.env`.
    - قم بتوليد مفتاح التشفير: `php artisan key:generate`
    - قم بإعداد اتصال قاعدة البيانات.

4. **تجهيز قاعدة البيانات:**

    ```bash
    php artisan migrate:fresh --seed
    ```

5. **بيانات الدخول الافتراضية:**

    - البريد: `admin@gmail.com`
    - كلمة المرور: `password`

6. **تشغيل السيرفر:**
    ```bash
    php artisan serve
    ```

---

## ملاحظة للتجربة

عند استخدام Postman لتجربة الروابط، لا تنسَ إضافة الـ Header التالي في جميع الطلبات المحمية:

```
Accept: application/json
Authorization: Bearer <TOKEN>
```
